<div class="clr-row">
  <div class="clr-col-12">
      <label class = "infraTitle">Infrastructure Planning</label>
  </div>
</div>

<div class="clr-row inputFile" >
        <div class="clr-col-12">
            <input type="file" *ngIf = "showBtns" id="myFile" multiple (change)="handleFileInput($event.target.files)">
        </div>
        <div class="clr-col-12">   
            <button [clrLoading]="getCloudData" class="btn btn-info-outline" (click)="uploadFileToActivity()"  *ngIf = "showBtns" [disabled]="!enableUpload">Upload & Run</button> 
            <!--<button class="btn btn-primary " (click)="uploadFileToActivity()" *ngIf = "showBtns" [disabled]="!enableUpload">Upload & Run</button>-->
        </div>
</div>

<div class="row" >
  <div class="col-md-5" *ngFor = "let cloud of cloudRegions ; let c = index">
        <div class="card" [ngStyle]="myStyles[c%4]">
            <div class="card-block">
                <div class="card-title">
                    <img class = "cloudImg" src = "../../../../../assets/images/{{images[c]}}">
                </div>
                <div class="clr-row">
                        <div class="clr-col-12">
                            <label class = "cloudTitle">{{cloud.cloudName}}</label>                            
                        </div>
                </div>
                <div class="card-text cloudRow">
                  <select clrSelect name="options" [(ngModel)]="cloud.selectedRegion">
                    <option  *ngFor = "let region of cloud.region; let r = index" value = "{{region}}">{{region}}</option>
                  </select>
                  <div class = "seeResult" id = "{{c}}"><button class="btn btn-primary" [disabled] = "!showResult" (click) = "showCloudDetails(c)">See Result</button></div>
                </div>
            </div>
        </div>      
  </div>
</div>

<div class="row" *ngIf = "showCloud">
    <div class="col-md-3" *ngFor = "let cloud of cloudDetails ; let c = index">
        <div class="card">
            <div class="card-block">
                <div class="card-title">
                </div>
                <div class="card-text">
                    <div>CPU : {{cloud.cpu}} vCPU</div>
                    <div>CPU Cost: {{cloud.cpuCost.toFixed(2)}} $/month</div>
                    <div>Memory : {{cloud.memory}} GB</div>
                    <div>Memory Cost : {{cloud.memoryCost.toFixed(2)}} $/month</div>
                    <div class = "cost">Total Cost : {{cloud.totalCost.toFixed(2)}} $/month</div>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-link" (click) = "showDetails(cloud)">View Details</button>
          </div>
        </div>
    </div>
  </div>

  <div class="clr-row backRow" *ngIf = "backBtn">
      <div class="clr-col-12">
          <button class="btn btn-outline" (click) = "back()"><label class = "back">Back</label></button>    
      </div>
  </div>  

  <clr-modal [(clrModalOpen)]="cloudData" [clrModalSize]="'lg'">
        <h3 class="modal-title"><label style = "color : #004A70; font-weight: bold;font-size : 20px">{{selectedCloud.cloud}}</label></h3>
        <div class="modal-body">
                <div>CPU : {{selectedCloud.cpu}} vCPU</div>
                <div>CPU Cost: {{selectedCloud.cpuCost.toFixed(2)}} $/month</div>
                <div>Memory : {{selectedCloud.memory}} GB</div>
                <div>Memory Cost : {{selectedCloud.memoryCost.toFixed(2)}} $/month</div>
                <div class = "cost">Total Cost : {{selectedCloud.totalCost.toFixed(2)}} $/month</div>
                <div><button class="btn btn-success-outline" (click) = "showDetails(selectedCloud.nodes)">View Details</button></div>

                <clr-datagrid *ngIf = "viewDetails">
                        <clr-dg-column>Instance Type</clr-dg-column>
                        <clr-dg-column>OS</clr-dg-column>
                        <clr-dg-column>CPU (vCPU)</clr-dg-column>
                        <clr-dg-column>Memory (GB) </clr-dg-column>
                        <clr-dg-column>CPU Cost ($/month)</clr-dg-column>
                        <clr-dg-column>Memory Cost ($/month)</clr-dg-column>
                        <clr-dg-column>Total Cost ($/month)</clr-dg-column>
                    
                        <clr-dg-row *ngFor="let node of selectedNode">
                            <clr-dg-cell>{{node.instanceType}}</clr-dg-cell>
                            <clr-dg-cell>{{node.os}}</clr-dg-cell>
                            <clr-dg-cell>{{node.cpuNode.toFixed(2)}}</clr-dg-cell>
                            <clr-dg-cell>{{node.memoryNode.toFixed(2)}}</clr-dg-cell>
                            <clr-dg-cell>{{node.cpuNodeCost.toFixed(2)}}</clr-dg-cell>
                            <clr-dg-cell>{{node.memoryNodeCost.toFixed(2)}}</clr-dg-cell>
                            <clr-dg-cell>{{node.totalNodeCost.toFixed(2)}}</clr-dg-cell>
                        </clr-dg-row>
                    </clr-datagrid>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" (click)="cloudData = false">Done</button>
        </div>
    </clr-modal>